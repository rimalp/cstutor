<html>
<head>
	<link rel="stylesheet" href="http://code.jquery.com/ui/1.10.3/themes/smoothness/jquery-ui.css" />
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
	<script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/jquery-ui.min.js"></script>
	<script type="text/javascript" src="../public/javascripts/raphael.js"></script>
	<script type="text/javascript" src="../public/javascripts/dracula_graffle.js"></script>
	<script type="text/javascript" src="../public/javascripts/database_requests.js"></script>
	<script type="text/javascript" src="../public/javascripts/graph.js"></script>
	<script type="text/javascript" src="../public/javascripts/menu.js"></script>
	<script type="text/javascript" src="../public/javascripts/newproject.js"></script>
	<script src="/jquery.cookie.js"></script>
	<link href="../bootstrap/css/bootstrap.css" rel="stylesheet">
	<link href="../bootstrap/css/bootstrap-responsive.css" rel="stylesheet">

	
	<script type="text/javascript">

		var setInfo = function(name, description){
			document.getElementById("info").innerHTML = "Title: " + name + "<br>Description: " + description;
		}

		function logout(){
		        $.removeCookie("mode");
		        $.removeCookie("email");
		        $.removeCookie("password");
		        $.removeCookie("firstName");
		        $.removeCookie("lastName");
				window.location.href ='/login';
		}
	</script>


	<script>


		$(document).ready(function(){	
		    //redirect to login page if a previous user has logged out and the cookie user info is deleted
		    if($.cookie("email") == undefined){
		        window.location.href="/login";
		    }
		    
			$('#user_logout').append($('#user_icon'));
			$('#user_logout').text("Logout, "+$.cookie("firstName"));
			$.cookie('editgraph', "true", { path: "/" }); //setting true for initial data fetch and graph construction
			$('#btn_save').hide();
  			// Attaching to the save button click button click 
			$("#btn_save").on("click", function () {
			    $.cookie('editgraph', "false", { path: "/" });
			    $('#btn_save').hide();
			    $('#btn_edit').show();
			    console.log("Edit cookie set to: " + $.cookie('editgraph'));
			    //call the function in menu.js that saves the graph

			});
			$("#btn_edit").on("click", function () {
				$('#btn_edit').hide();
				$('#btn_save').show();
			    $.cookie('editgraph', "true", { path: "/" });
			    console.log("Edit cookie set to: " + $.cookie('editgraph'));
			});

		});
	</script>

	<style type="text/css">   


		.dropdown-menu {
		    background-clip: padding-box;
		    background-color: red;
		    border: 1px solid rgba(0, 0, 0, 0.2);
		    border-radius: 6px 6px 6px 6px;
		    box-shadow: 0 5px 10px rgba(0, 0, 0, 0.2);
		    display: none;
		    float: left;
		    left: 0;
		    list-style: none outside none;
		    margin: 2px 0 0;
		    min-width: 160px;
		    padding: 5px 0;
		    position: absolute;
		    top: 100%;
		    z-index: 1000;
		}

		.btn-group.open .btn.dropdown-toggle {
		  background-color: red;
		}

		.btn-group.open .btn.dropdown-toggle {
		  background-color:lime;
		}

		.navbar .nav li.dropdown.open > .dropdown-toggle,
		.navbar .nav li.dropdown.active > .dropdown-toggle,
		.navbar .nav li.dropdown.open.active > .dropdown-toggle {
		  color:white;
		  background-color:Teal;
		}

		.navbar .nav > li > a {
		    color: #0066CC;
		    float: none;
		    padding: 10px 15px;
		    text-decoration: none;
		    text-shadow: 0 0px 0 #ffffff;
		}


		.navbar .brand {
		  display: block;
		  float: left;
		  padding: 10px 20px 10px;
		  margin-left: -20px;
		  font-size: 20px;
		  font-weight: 200;
		  color: #0066CC;
		  text-shadow: 0 0px 0 #ffffff;
		}

		.navbar .nav > li > a:focus,
		.navbar .nav > li > a:hover {
		  color: black;
		  text-decoration: none;
		  background-color: transparent;
		}

		.navbar-text {
		  margin-bottom: 0;
		  line-height: 40px;
		  color: black;
		}

		.dropdown-menu li > a {
		  display: block;
		  padding: 3px 20px;
		  clear: both;
		  font-weight: normal;
		  line-height: 20px;
		  color: white;
		  white-space: nowrap;
		}

		.navbar-link {
		  color: white;
		}

		.navbar-link:hover {
		  color: blue;
		}

		</style>
	
	<style type="text/css">
		
		.gradbg{
			/*background-color: #84B4D5;
			background-image: linear-gradient(to top right, #29061B, #329DEF);*/
			background: url('bubbles.png') no-repeat center center fixed; 
              -webkit-background-size: cover;
              -moz-background-size: cover;
              -o-background-size: cover;
              background-size: cover;
		}
		
		.side-box{
			margin-bottom: 20px;
			border-radius: 6px 6px 6px 6px;
			border: 1px solid gray;
		}
		
		.side-box-header{
			border-radius: 6px 6px 0px 0px;
			background-color:  rgb(245, 245, 245);
			margin: 0px;
			padding: 0px;
			border-bottom: 1px solid gray;
		}
		
		.side-box-body{
			padding: 5px;
			background: white;
			border-radius: 0px 0px 6px 6px;
		}
		
		.header{
			text-align: left;
		}
		
		.info_block{
			border: 1px solid gray;
			padding: 5px;
			display: inline-block;
			margin-left: 10px;
			border-radius: 6px 6px 6px 6px;
			background: rgb(245, 245, 245);
			-moz-box-shadow:    3px 3px 3px 0px #ccc;
			-webkit-box-shadow: 3px 3px 3px 0px #ccc;
			box-shadow:         3px 3px 3px 0px #ccc;
		}
		
		.info_content{
			display: block;
		}
		
		.title{
			display: block;
			background: rgb(245, 245, 245);
			border-top: 5px solid black;
			border-left: 5px solid black;
			border-right: 5px solid black;
			border-bottom: 2px solid gray;
			text-align: center;
			height: 6%;
			padding: 0px;
			margin: 0px;
			-moz-box-shadow:    0px 3px 3px 0px #ccc;
			-webkit-box-shadow: 0px 3px 3px 0px #ccc;
			box-shadow:         0px 3px 3px 0px #ccc;
		}
		
		.center_container{
			border-bottom: 5px solid black;
			border-left: 5px solid black;
			border-right: 5px solid black;
			overflow: scroll;
			height: 92.5%;
			background: white;
			visibility: visible;
		}
		
		.hidden{
			visibility: hidden;
			height: 0px;
			width: 0px;
		}
		
		h3{
			margin: 0px 0px;
			padding: 5px;
		}
		
		.navigate_button{
			background: rgb(245, 245, 245);
			border: 1px solid gray;
			width: 100%;
			height: 70px;
			font-size: 18px;
			color: rgb(0, 136, 204);
		}
		
		.top_navigate_button{
			border-radius: 6px 6px 0px 0px;
		}
		
		.bottom_navigate_button{
			border-radius: 0px 0px 6px 6px;
		}
		
		button{
			background-color: rgb(80, 129, 179);
			color: white;
			display: inline-block;
			text-decoration: none;
			border-radius: 0.3125em 0.3125em 0.3125em 0.3125em;
			font-family: "Droid Sans",Helvetica,Arial,sans-serif;
			line-height: 1.125em;
			border: 1px solid rgb(217, 219, 221);
			width: 90px;
			height: 30px;
		}


		
	</style>
</head>

<body onload="init()" >

	
	<div class="row-fluid gradbg" >
		<div id="top" style="height:7%; width: 100%; text-aligh:center">

				<div class="navbar navbar-fixed-top">
				    <div class="navbar-inner">
				        <div class="container">
				            <a title="" class="brand" href="#">Graph Tutor<!-- <img src="/CSTutorIcon.gif"/> --></a>
				                <ul class="nav pull-right">
				                <li class="divider-vertical">
				                <li><a href="">About</a></span></li>
				                <li class="divider-vertical">
				                <li><a href="">Contact</a></li>
				                <li class="divider-vertical">
				                <li class="dropdown"><a id="user_logout" href="javascript:logout()" class="dropdown-toggle" data-toggle="dropdown">Logout<i id="user_icon" class="icon-user"></i></a>
				                    <!-- <ul class="dropdown-menu">
				                        <li><a href="">My account</a></li>
				                        <li><a href="/accounts/logout/">Log out</a></li>
				                    </ul> -->
				                </li>
				            </ul>
				            </div>
				       </div>
				</div>
				


		</div>


	
		<!-- left-->
		<div class="row-fluid span2" style="margin: 0px; width: 17%;">
			<div id="menu-container" style="position: fixed; margin: .5%; width: 16%;">
				<!-- Graph Selection Menu -->
				<!-- <div id="menu" class="well sidebar-nav">
				</div> -->
				<!-- Admin Menu -->
				<div id="admin-menu">
					<button class="navigate_button top_navigate_button" onclick="displayWelcomeMessage();">Home</button><br>
					<button class="navigate_button" onclick="displayDetail(courses);">Courses</button><br>
					<button class="navigate_button bottom_navigate_button" onclick="displayProfileInformation();">Account</button>
				</div>
			</div>
		</div>
		
		<!-- center-->
		<div class="span8" style="margin: 0px; width: 66%;">
			<!-- header -->
			<div id="center_header" class="title">
				<h3>Welcome to Graph Tutor!</h3>
			</div>
			
			<!-- detail view -->
			<div id="detail_view_container" class="center_container">
				<div id="detail_view" style="display: inline;">
				</div>
			</div>
			
			<!-- canvas -->
			<div id="canvas" class="center_container"></div>
		</div>
	
		<!-- right -->
		<div class="span2" style="margin: 0px; width: 17%;">
			<div style="position: fixed; margin: .5%; width: 16%;">

				<!-- Edit/Done-->
				<div id="edit_sidebox" class="side-box">
					<header class="side-box-header"><h4 style="margin: 0px; color: #0066CC;">Change Design</h4></header>
					<div class="side-box-body" style="height: 70px; ">
						&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
	 					<button  id="btn_save" onclick="contractAll();">Save </button>
	 					<button id="btn_edit">Edit</button><br>
	 					Note: Changes made during edit have to be reverted manually.

					</div>
				</div>

				<!-- Node Info -->
				<div id = "nodeinfo_sidebox" class="side-box">
					<header class="side-box-header"><h4 style="margin: 0px; color: #0066CC;">Node Info</h4></header>
					<div id="info" class="side-box-body">
						Title: <br/>
						Description:
					</div>
				</div>
				<!-- New Node -->
				<div id="newnode_sidebox" class="side-box">
					<header class="side-box-header"><h4 style="margin: 0px; color: #0066CC;">New Node</h4></header>
					<div class="side-box-body">
						<div class="row-fluid">
							<input id="node_name" type="text" placeholder="Title"/>
							<textarea id="node_description" placeholder="Description" class="span12" style="resize: none;"></textarea>
						</div>
						<div class="row-fluid">
							<button class="offset5" id="add_node" onclick="addNode(document.getElementById('node_name').value, document.getElementById('node_description').value);">Add</button>
						</div>
					</div>
				</div>
				<!-- Minimap -->
				<div id="minimap_sidebox" class="side-box">
					<header class="side-box-header"><h4 style="margin: 0px; color: #0066CC;">MiniMap</h4></header>
					<div id="minimap" class="side-box-body" style="height: 200px;">						
					</div>
				</div>

				<!-- About -->
				<div id="about_sidebox" class="side-box">
					<header class="side-box-header"><h4 style="margin: 0px; color: #0066CC;">About/Help</h4></header>
					<div class="side-box-body" style="height: 120px;">
						About the app and any context-specific help/instruction.
					</div>
				</div>
				<!-- Contact-->
				<div id="contact_sidebox" class="side-box">
					<header class="side-box-header"><h4 style="margin: 0px; color: #0066CC;">Contact</h4></header>
					<div class="side-box-body" style="height: 150px;">
						Please contact Jack (kellerj@lafayette.edu) or Prabhat (rimalp@lafayette.edu) if you have issues. Thank you!
					</div>
				</div>
				
			</div>
		</div>
	</div>

</body>
</html>

